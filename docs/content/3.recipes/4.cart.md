---
title: Using the Cart
description: How to use the cart in your shopify store in nuxt
navigation:
  icon: i-lucide-shopping-cart
seo:
  title: Using the Cart
  description: How to use the cart in your shopify store in nuxt
---

:::code-tree{default-value="app/pages/index.vue"}
```graphql [app/graphql/fragments/cart-item.graphql]
// TODO: check if this is correct
fragment CartItem on CartLine {
  id
  merchandise {
    ... on ProductVariant {
      id
      title
      price {
        amount
        currencyCode
      }
    }
  }
}
```

```graphql [app/graphql/fragments/cart.graphql]
// TODO: check if this is correct
fragment Cart on Cart {
  id
  totalQuantity
  lines(first: 100) {
    edges {
      node {
        ...CartItem
      }
    }
  }
  cost {
    totalAmount {
      amount
      currencyCode
    }
  }
}
```

```ts [app/composables/cart.ts]
export function useCart() {
  const cartId = useCookie('cartId')
  const items = useState('cartItems', () => [])
  
  const { data: cart, refresh, error } = await useAsyncStorefront('cart', `#graphql
    mutation CreateCart($cartId: String!, $language: LanguageCode, $country: CountryCode)
    @inContext(language: $language, country: $country) {
      cartCreate(input: { id: $cartId }) {
        cart {
          ...Cart
        }
      }
    }
  `)
  

  return {
    items,
  }
} 
```

```vue [app/app.vue]
<template>
  <UApp>
    <NuxtPage />
  </UApp>
</template>
```
:::

